### 什么是 TCP 三次握手，为什么要三次握手？

1. 什么是 TCP 三次握手？

* 起初
    * 客户端 CLOSED
    * 服务端 CLOSED
* 第一次握手
    * 客户端发送请求报文
      * 传输自身通讯初始序号
      * 客户端 SYN-SENT
* 第二次握手
    * 服务器接收请求报文
      * 同意连接
        * 传输自身通讯初始序号
        * 服务端 SYN-RECEIVED
      * 拒绝连接
        * 服务端 REFUSED
* 第三次握手
    * 客户端接收应答报文
      * 客户端发送确认报文
      * 客户端 ESTABLISHED
    * 服务端接收确认报文
      * 服务端 ESTABLISHED

2. 为什么要三次握手？

* 客户端首次发送请求无应答，TCP 启动超时重传
* 服务器收到重传的请求，建立连接，接收数据，关闭连接
* 服务器收到客户端首次发送请求，再次建立连接，但客户端已经关闭连接

需要三次握手，客户端发送确认报文后再建立连接，避免重复建立连接
